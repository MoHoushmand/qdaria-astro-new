---
interface Props {
  title?: string;
  description?: string;
}

const { title, description } = Astro.props;
---

<div class="chart-container">
  {title && <h4 class="text-gradient-blue text-xl font-semibold mb-4">{title}</h4>}
  <div class="chart-content">
    <svg width="100%" height="100%" viewBox="0 0 800 400" preserveAspectRatio="xMidYMid meet">
      <!-- Background -->
      <rect x="0" y="0" width="800" height="400" fill="#020617" rx="10" ry="10" />
      
      <!-- Timeline axis -->
      <line x1="100" y1="200" x2="700" y2="200" stroke="white" stroke-width="2" />
      
      <!-- Timeline points -->
      <circle cx="150" cy="200" r="10" fill="#04a3ff" />
      <circle cx="300" cy="200" r="10" fill="#00ffd3" />
      <circle cx="450" cy="200" r="10" fill="#65ff00" />
      <circle cx="600" cy="200" r="10" fill="#ffcc00" />
      
      <!-- Timeline labels -->
      <text x="150" y="230" text-anchor="middle" fill="white" font-size="14">2024-25</text>
      <text x="300" y="230" text-anchor="middle" fill="white" font-size="14">2026-27</text>
      <text x="450" y="230" text-anchor="middle" fill="white" font-size="14">2028-30</text>
      <text x="600" y="230" text-anchor="middle" fill="white" font-size="14">2031-35</text>
      
      <!-- Phase 1 -->
      <text x="150" y="170" text-anchor="middle" fill="#04a3ff" font-size="16" font-weight="bold">Phase 1</text>
      <text x="150" y="140" text-anchor="middle" fill="white" font-size="12">Foundation &</text>
      <text x="150" y="160" text-anchor="middle" fill="white" font-size="12">Seed Stage</text>
      <text x="150" y="100" text-anchor="middle" fill="white" font-size="12">9-qubit prototype</text>
      <text x="150" y="120" text-anchor="middle" fill="white" font-size="12">Initial product launches</text>
      
      <!-- Phase 2 -->
      <text x="300" y="170" text-anchor="middle" fill="#00ffd3" font-size="16" font-weight="bold">Phase 2</text>
      <text x="300" y="140" text-anchor="middle" fill="white" font-size="12">Growth &</text>
      <text x="300" y="160" text-anchor="middle" fill="white" font-size="12">Market Validation</text>
      <text x="300" y="100" text-anchor="middle" fill="white" font-size="12">50+ qubits</text>
      <text x="300" y="120" text-anchor="middle" fill="white" font-size="12">Expanding services</text>
      
      <!-- Phase 3 -->
      <text x="450" y="170" text-anchor="middle" fill="#65ff00" font-size="16" font-weight="bold">Phase 3</text>
      <text x="450" y="140" text-anchor="middle" fill="white" font-size="12">Market Leadership</text>
      <text x="450" y="160" text-anchor="middle" fill="white" font-size="12">& IPO</text>
      <text x="450" y="100" text-anchor="middle" fill="white" font-size="12">100+ qubit systems</text>
      <text x="450" y="120" text-anchor="middle" fill="white" font-size="12">Enterprise solutions</text>
      
      <!-- Phase 4 -->
      <text x="600" y="170" text-anchor="middle" fill="#ffcc00" font-size="16" font-weight="bold">Phase 4</text>
      <text x="600" y="140" text-anchor="middle" fill="white" font-size="12">Global Expansion</text>
      <text x="600" y="160" text-anchor="middle" fill="white" font-size="12">& Diversification</text>
      <text x="600" y="100" text-anchor="middle" fill="white" font-size="12">Post-IPO growth</text>
      <text x="600" y="120" text-anchor="middle" fill="white" font-size="12">Market dominance</text>
      
      <!-- Progress bars -->
      <rect x="125" y="260" width="50" height="20" rx="5" ry="5" fill="#04a3ff" />
      <text x="150" y="275" text-anchor="middle" fill="white" font-size="12">100%</text>
      
      <rect x="275" y="260" width="50" height="20" rx="5" ry="5" fill="#00ffd3" opacity="0.8" />
      <text x="300" y="275" text-anchor="middle" fill="white" font-size="12">80%</text>
      
      <rect x="425" y="260" width="50" height="20" rx="5" ry="5" fill="#65ff00" opacity="0.4" />
      <text x="450" y="275" text-anchor="middle" fill="white" font-size="12">40%</text>
      
      <rect x="575" y="260" width="50" height="20" rx="5" ry="5" fill="#ffcc00" opacity="0.1" />
      <text x="600" y="275" text-anchor="middle" fill="white" font-size="12">10%</text>
      
      <!-- Connecting lines -->
      <line x1="150" y1="200" x2="300" y2="200" stroke="rgba(255, 255, 255, 0.5)" stroke-width="2" stroke-dasharray="5,5" />
      <line x1="300" y1="200" x2="450" y2="200" stroke="rgba(255, 255, 255, 0.5)" stroke-width="2" stroke-dasharray="5,5" />
      <line x1="450" y1="200" x2="600" y2="200" stroke="rgba(255, 255, 255, 0.5)" stroke-width="2" stroke-dasharray="5,5" />
      
      <!-- Progress label -->
      <text x="400" y="320" text-anchor="middle" fill="white" font-size="14" font-weight="bold">Phase Completion Progress</text>
    </svg>
  </div>
  {description && <p class="text-base text-gray-400 mt-4 italic text-sm">{description}</p>}
</div>

<style>
  .chart-container {
    @apply relative rounded-2xl border border-primary-500/30 bg-dark-bg/80 backdrop-blur-sm transition-all duration-500 overflow-visible;
    box-shadow: 0 0 25px rgba(4, 163, 255, 0.4);
    @apply m-8 p-10 max-w-[800px] w-full select-none;

    &:hover {
      box-shadow: 0 0 50px rgba(4, 163, 255, 0.6);
      transform: translateY(-4px) scale(1.02);
      @apply border-primary-500/50 bg-dark-bg/90;
      animation: pulse-card 2s ease-in-out infinite;
    }

    @keyframes pulse-card {
      0%, 100% {
        box-shadow: 0 0 50px rgba(4, 163, 255, 0.6);
      }
      50% {
        box-shadow: 0 0 70px rgba(4, 163, 255, 0.8);
      }
    }

    &::before {
      content: "";
      @apply absolute inset-0 rounded-2xl;
      background: radial-gradient(
        800px circle at var(--mouse-x, 0) var(--mouse-y, 0),
        rgba(4, 163, 255, 0.15),
        transparent 40%
      );
      opacity: 0;
      transition: opacity 0.5s;
    }

    &:hover::before {
      opacity: 1;
    }
  }

  .chart-content {
    @apply h-[400px] w-full;
  }

  .text-gradient-blue {
    @apply bg-gradient-to-r from-[#04a3ff] via-[#00ffd3] to-[#65ff00] bg-clip-text text-transparent;
    filter: brightness(1.8) saturate(1.4);
    text-shadow: 0 0 30px rgba(4, 163, 255, 0.4);
    animation: pulse-gradient 4s ease-in-out infinite;
  }

  @keyframes pulse-gradient {
    0%, 100% {
      filter: brightness(1.8) saturate(1.4);
      text-shadow: 0 0 30px rgba(4, 163, 255, 0.4);
    }
    50% {
      filter: brightness(2) saturate(1.6);
      text-shadow: 0 0 40px rgba(4, 163, 255, 0.5);
    }
  }
</style>

<script is:inline>
  // Add mouse tracking for hover effect
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.chart-container').forEach((card) => {
      card.addEventListener('mousemove', (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        card.style.setProperty('--mouse-x', `${x}px`);
        card.style.setProperty('--mouse-y', `${y}px`);
      });
    });
  });
</script>
