---
declare global {
  interface Window {
    toggleBio: (id: string) => void;
  }
}
import BaseLayout from "@layouts/BaseLayout.astro";
import Badge from "@components/Badge/Badge.astro";
import Button from "@components/Button/Button.astro";

// Team member image paths - using optimized versions
const moImage = "/images/team-optimized/daniel-mo-houshmand";
const johnImage = "/images/team-optimized/john";
const nickImage = "/images/team-optimized/nick";
const fredrikImage = "/images/team-optimized/fredrik";
const emanueleImage = "/images/team-optimized/emanuele";
const gasparImage = "/images/team-optimized/gaspar";
const milenImage = "/images/team-optimized/milen";
const carolineImage = "/images/team-optimized/caroline";
const nilsImage = "/images/team-optimized/nils";
const dariaImage = "/images/team-optimized/daria";
const shararehImage = "/images/team-optimized/sharareh";
const rajeshImage = "/images/team-optimized/rajesh-chavan";
const sveinErikImage = "/images/team-optimized/svein-erik-nilsen";

// Debug logging
console.log('Team images loaded:', {
  moImage,
  johnImage,
  nickImage,
  fredrikImage,
  emanueleImage,
  gasparImage,
  milenImage,
  carolineImage,
  nilsImage,
  dariaImage,
  shararehImage,
  rajeshImage,
  sveinErikImage
});

// Page metadata
const pageTitle = "Our Team | QDaria Quantum Technologies";
const description =
  "Meet the innovative minds shaping the future of quantum computing in the heart of Norway.";

// Team members in requested order
const teamMembers = [
  {
    name: "Caroline Woie",
    role: "Chief Content Officer (CCO)",
    bio: `Caroline Woie translates quantum complexity into compelling narratives that bridge scientific innovation and public understanding. As Chief Content Officer and accomplished director with credits including NRK's 24-episode series "Gym" and documentary "Fetisha sveiper," she brings cinematic storytelling expertise to quantum technology communication. Caroline's documentary-style approach demystifies abstract quantum concepts through visual storytelling, photography, and multimedia content that engages investors, partners, and the broader public. Her editorial vision positions QDaria's research breakthroughs within broader technological and societal contexts, articulating how topological quantum computing addresses real-world challenges in drug discovery, climate modeling, and artificial intelligence. Caroline directs content strategy across scientific publications, investor communications, educational initiatives, and brand storytelling—ensuring QDaria's innovations resonate with diverse stakeholders. Her production expertise transforms technical achievements into accessible, inspiring narratives that accelerate quantum literacy and position QDaria as a thought leader in the quantum revolution.`,
    image: carolineImage,
    email: "caroline.woie@qdaria.com",
    linkedin: "https://www.linkedin.com/in/caroline-woie-5b3b5a25/",
  },
  {
    name: "Svein-Erik Nilsen",
    role: "Chief Operating Officer (COO)",
    bio: `Svein-Erik Nilsen transforms operational complexity into competitive advantage, orchestrating QDaria's infrastructure, resource allocation, and process excellence. As Chief Operating Officer, he implements scalable systems that support rapid innovation while maintaining operational rigor across research, development, and business functions. Svein-Erik's expertise in organizational design enables QDaria to balance scientific exploration with commercial execution, establishing workflows that accelerate quantum algorithm development, hardware prototyping, and market deployment. His strategic resource management optimizes laboratory capabilities, computational infrastructure, and talent deployment—ensuring research teams access cutting-edge tools while maintaining fiscal discipline. Svein-Erik champions operational transparency and cross-functional collaboration, breaking down silos between quantum physicists, software engineers, and business developers. His process optimization initiatives reduce development cycles, enhance quality control, and position QDaria for exponential scaling as quantum technologies mature from experimental systems to production-ready platforms.`,
    image: sveinErikImage,
    email: "svein-erik@qdaria.com",
    linkedin: "https://www.linkedin.com/in/svein-erik-nilsen-a197b13/",
  },
  {
    name: "John Kristiansen",
    role: "Head of Networking",
    bio: `John Kristiansen cultivates strategic relationships that amplify QDaria's influence across quantum computing, research institutions, and investment communities. Leveraging extensive property development experience that honed his partnership-building capabilities, John orchestrates networking initiatives connecting QDaria with key stakeholders in academia, industry, and government. His strategic relationship management opens doors to collaborative research opportunities, technology transfer agreements, and commercial partnerships that accelerate quantum innovation deployment. John's networking expertise identifies synergies between QDaria's capabilities and market needs, facilitating introductions that translate into funded research projects, pilot programs, and strategic alliances. He spearheads QDaria's presence at international quantum conferences, investor forums, and industry summits—positioning the company as an accessible partner for organizations seeking quantum computing expertise. John's relationship infrastructure supports business development, talent acquisition, and market intelligence gathering, creating a robust ecosystem that sustains QDaria's growth trajectory.`,
    image: johnImage,
    email: "john@qdaria.com",
    linkedin: "https://www.linkedin.com/in/john-kristiansen/",
  },
  {
    name: "Rajesh Chavan",
    role: "Chief Strategy & Growth Officer (CSGO)",
    bio: `Rajesh Chavan architects QDaria's strategic expansion and technology partnership ecosystem with precision and foresight. As Chief Strategy & Growth Officer, he orchestrates market evaluation, competitive intelligence, and partnership development that position QDaria at the forefront of quantum computing commercialization. Rajesh's strategic acumen transforms emerging quantum technologies into viable business opportunities, identifying high-value market segments and cultivating relationships with research institutions, enterprise clients, and investment partners. His data-driven approach to growth strategy balances aggressive market penetration with sustainable scaling, ensuring QDaria's innovations reach industries primed for quantum transformation. Rajesh leads technology assessment initiatives that guide R&D prioritization, aligning scientific breakthroughs with market demands in finance, pharmaceuticals, logistics, and cybersecurity. His strategic vision extends beyond immediate growth metrics to long-term ecosystem development, positioning QDaria as an anchor player in the global quantum economy.`,
    image: rajeshImage,
    email: "rajesh@qdaria.com",
    linkedin: "https://www.linkedin.com/in/rajesh-chavan/",
  },
  {
    name: "Nick Saaf",
    role: "Chief Sales Officer (CSO)",
    bio: `Nick Saaf drives QDaria's sales strategy and customer relationship excellence, translating quantum computing capabilities into compelling value propositions for enterprise clients. As Chief Sales Officer and founder of Alfresco Cookery s.r.o., Nick brings hospitality industry insights—where customer experience defines success—to quantum technology commercialization. His sales approach demystifies quantum computing's technical complexity, articulating clear ROI for organizations in finance, pharmaceuticals, logistics, and cybersecurity exploring quantum advantage. Nick develops sales frameworks that navigate quantum computing's extended sales cycles, building trust with technical decision-makers and C-suite executives through education-focused selling. His customer relationship management ensures clients understand quantum capabilities, limitations, and roadmap—fostering partnerships built on realistic expectations and mutual growth. Nick's sales strategy balances immediate revenue opportunities with long-term ecosystem development, positioning QDaria as a trusted quantum computing partner. His hospitality background informs a customer-centric approach that prioritizes client success, ensuring quantum implementations deliver measurable business impact.`,
    image: nickImage,
    email: "nick@qdaria.com",
    linkedin: "https://www.linkedin.com/in/nick-saaf-8a18b3314/",
  },
  {
    name: "Gaspar Alvarado",
    role: "Chief Financial Officer (CFO)",
    bio: `Gaspar Alvarado architects QDaria's financial foundation with strategic precision, balancing aggressive R&D investment with sustainable fiscal management. As Chief Financial Officer, he implements financial systems that support quantum computing's long development cycles while maintaining investor confidence and operational flexibility. Gaspar's procurement expertise optimizes resource allocation across quantum hardware acquisition, computational infrastructure, and talent investment—ensuring maximum research impact per dollar invested. His financial modeling anticipates quantum technology commercialization timelines, structuring funding rounds and partnerships that provide runway for breakthrough innovation. Gaspar champions transparent financial reporting and risk management, establishing controls that protect QDaria's assets while enabling calculated risks essential to scientific advancement. His strategic financial planning positions QDaria for multiple funding scenarios—from grant-based research support to venture capital and strategic corporate partnerships—ensuring capital availability through quantum computing's maturation phases. Gaspar's fiscal discipline enables ambitious innovation without compromising organizational stability.`,
    image: gasparImage,
    email: "gaspar@qdaria.com",
    linkedin: "https://www.linkedin.com/in/gaspar-alvarado-78204219/",
  },
  {
    name: "Sharareh Movahed Shariat Panahi",
    role: "Assistant Chief Executive Officer (ACEO)",
    bio: `Sharareh Movahed Shariat Panahi ensures organizational excellence and regulatory compliance as QDaria navigates quantum computing's complex legal and governance landscape. As Assistant CEO with legal expertise, she establishes frameworks that balance innovation velocity with intellectual property protection, data security, and regulatory adherence. Sharareh's governance systems support QDaria's multi-stakeholder environment—coordinating research teams, business units, and external partnerships while maintaining organizational coherence. Her legal acumen addresses quantum computing's emerging regulatory challenges, from export controls on quantum technologies to data privacy in quantum-enhanced systems. Sharareh champions compliance frameworks that anticipate future regulations while preserving research freedom and commercial flexibility. Her strategic coordination ensures executive decisions align with long-term vision, facilitating communication between technical leadership and business operations. Sharareh's organizational leadership creates structured flexibility—enabling rapid response to scientific breakthroughs and market opportunities while maintaining operational discipline essential for scaling quantum ventures.`,
    image: shararehImage,
    email: "sharareh@qdaria.com",
    linkedin: "https://www.linkedin.com/in/sharareh/",
  },
  {
    name: "Daniel Mo Houshmand",
    role: "CEO & Founder",
    bio: `Daniel Mo Houshmand pioneers topological quantum computing at the intersection of pure mathematics and quantum physics. With a Master's in Applied Mathematics and Bachelor's in Engineering, he drives QDaria's groundbreaking work in Fibonacci anyon-based quantum systems—a frontier poised to revolutionize error-resistant quantum computation. As an invited speaker at IQT New York 2024 and Davos 2025, Daniel articulates a transformative vision: building 7-12 quantum-focused companies by 2030 that democratize access to quantum technologies. His leadership philosophy centers on aggressive R&D investment, rapid iteration, and strategic global partnerships to accelerate quantum computing's transition from laboratory curiosity to industrial necessity. Under his direction, QDaria advances proprietary algorithms in topological quantum error correction while cultivating Norway's quantum ecosystem through talent development and international collaboration. Daniel's strategic roadmap positions QDaria as a catalyst for quantum-era innovation across finance, cryptography, materials science, and artificial intelligence.`,
    image: moImage,
    email: "mo@qdaria.com",
    linkedin: "https://www.linkedin.com/in/mohoushmand/",
  },
  {
    name: "Nils Bjelland Grønvold",
    role: "Chief Culture Officer (CCO)",
    bio: `Nils Bjelland Grønvold cultivates QDaria's innovative culture through creative leadership informed by his multifaceted artistic career. As a rapper who performed at Roskilde Festival and co-founded RatPack, Nils understands how creative collaboration sparks breakthrough innovation. He channels this artistic sensibility into organizational culture design, fostering environments where quantum physicists, engineers, and business minds collaborate with creative fluidity. Nils champions psychological safety and intellectual risk-taking—essential ingredients for quantum computing breakthroughs that challenge conventional thinking. His culture initiatives blend scientific rigor with creative experimentation, establishing rituals, spaces, and norms that celebrate both analytical precision and imaginative problem-solving. Nils leads diversity and inclusion efforts that ensure QDaria attracts talent from varied backgrounds, recognizing that quantum revolution demands perspectives beyond traditional physics pipelines. His artistic background informs team-building approaches that strengthen interpersonal bonds, enhance communication, and sustain motivation through quantum computing's long development cycles. Nils transforms organizational culture into competitive advantage.`,
    image: nilsImage,
    email: "nils@qdaria.com",
    linkedin: "https://www.linkedin.com/in/nils-bjelland-gr%C3%B8nvold-63815b19/",
  },
  {
    name: "Daria (Søreide) Houshmand",
    role: "Developer (Intern) & Board Member",
    bio: `Daria Houshmand brings pioneering AI expertise and multidisciplinary scientific insight to QDaria's quantum computing initiatives. As an early adopter who explored GPT-2 in 2019—years before mainstream AI adoption—Daria demonstrates the technical curiosity and foresight that drives quantum innovation. Her passion for mathematics, physics, and programming creates natural synergies with quantum algorithm development and quantum machine learning applications. Daria contributes to QDaria's R&D initiatives at the intersection of quantum computing and artificial intelligence, exploring how quantum systems can enhance machine learning capabilities and vice versa. Her board membership provides strategic perspective that balances technical feasibility with business viability, ensuring QDaria's research agenda aligns with emerging market opportunities. Daria's developer background enables hands-on contributions to quantum software development while her broad scientific interests foster cross-pollination between quantum physics, computer science, and mathematical theory. Her technical leadership inspires QDaria's engineering teams to push boundaries at quantum computing's frontier.`,
    image: dariaImage,
    email: "daria@qdaria.com",
    linkedin: "https://www.linkedin.com/in/dariasoreidehoushmand/",
  },
  {
    name: "Fredrik Krey Stubberud",
    role: "Chief Information Officer (CIO)",
    bio: `Fredrik Krey Stubberud architects QDaria's technology infrastructure, ensuring robust IT systems support quantum computing's demanding computational and security requirements. As Chief Information Officer, Fredrik builds scalable infrastructure that bridges classical computing needs with quantum hardware integration, enabling seamless workflows for researchers and developers. His technology operations expertise addresses quantum computing's unique challenges—from cryogenic hardware monitoring systems to secure quantum key distribution networks. Fredrik implements cybersecurity frameworks protecting QDaria's intellectual property and research data while facilitating collaborative development across distributed teams. His systems management ensures high availability for computationally intensive quantum simulations, algorithm testing, and hardware control systems. Fredrik champions technology standardization and automation that accelerate development cycles while maintaining quality and security. His infrastructure vision anticipates QDaria's scaling requirements, establishing cloud-hybrid architectures and quantum-classical computing interfaces that support current research while remaining adaptable to emerging quantum technologies. Fredrik's IT leadership transforms technology from operational necessity into strategic enabler of quantum innovation.`,
    image: fredrikImage,
    email: "fredrik@qdaria.com",
    linkedin: "https://www.linkedin.com/in/fredrik-krey-stubberud",
  },
];
---

<BaseLayout title={pageTitle} description={description}>
  <main class="flex-1">
    <!-- Hero Section -->
    <section class="py-16 md:py-20">
      <div class="site-container">
        <div class="mx-auto max-w-4xl text-center">
          <Badge>Our Team</Badge>
          <h1 class="h1 mb-8 text-gradient-blue">
            Redefining What's Possible in Computing Through Topological Quantum Innovation
          </h1>
          <p class="description mx-auto mb-8 max-w-2xl text-lg md:text-xl">
            QDaria aims to lead the quantum revolution with breakthrough Fibonacci anyon technology, 
            to deliver unmatched stability and scalability. Our fault-tolerant quantum computers will 
            transform industries and solve humanity's greatest computational challenges.
          </p>
        </div>
      </div>
    </section>

    <!-- Team Grid -->
    <section class="py-16 md:py-20">
      <div class="site-container">
        <div class="mx-auto grid max-w-6xl gap-8 sm:grid-cols-2">
          {
            teamMembers.map((member) => (
                <div class="feature-card group relative overflow-hidden rounded-xl p-8 transition-all duration-500 hover:scale-[1.02] cursor-pointer" onclick="toggleBio('${member.name.replace(/\s+/g, '-').toLowerCase()}')">
                <div class="absolute inset-0 bg-gradient-to-br from-blue-600/20 via-transparent to-emerald-600/20 opacity-0 transition-opacity duration-500 group-hover:opacity-100"></div>
                <div class="relative flex flex-col md:flex-row md:gap-8">
                  <div class="mb-6 md:mb-0 md:w-1/3">
                    <div class="relative w-40 h-40">
                      <picture>
                        <source srcset={`${member.image}.webp`} type="image/webp" />
                        <source srcset={`${member.image}.jpg`} type="image/jpeg" />
                        <img
                          src={`${member.image}.jpg`}
                          alt={member.name}
                          class="rounded-full object-cover w-full h-full shadow-lg transition-transform duration-500 group-hover:scale-105"
                          width={160}
                          height={160}
                          loading="lazy"
                          decoding="async"
                        />
                      </picture>
                      <div class="absolute inset-0 rounded-full border-2 border-blue-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    </div>
                  </div>
                  <div class="md:w-2/3">
                    <h2 class="h3 mb-1 bg-gradient-to-r from-blue-400 via-teal-300 to-emerald-400 bg-clip-text text-transparent">
                      {member.name}
                    </h2>
                    <p class="mb-4 text-blue-400">{member.role}</p>
                    <div class="relative">
                      <div class="relative">
                        <div class="description text-gray-300/90 transition-all duration-500 overflow-hidden relative" 
                             style="max-height: 6rem;"
                             id={`bio-${member.name.replace(/\s+/g, '-').toLowerCase()}`}>
                          <div class="absolute inset-0 bg-gradient-to-b from-gray-900/0 via-gray-900/50 to-gray-900 transition-opacity duration-500 pointer-events-none"
                               id={`gradient-${member.name.replace(/\s+/g, '-').toLowerCase()}`}></div>
                          <p class="transition-opacity duration-300">{member.bio}</p>
                        </div>
                        <div class="mt-2">
                          <button 
                            class="text-blue-400 hover:text-blue-300 transition-colors duration-200 group-hover:underline"
                            onclick="event.stopPropagation(); toggleBio('${member.name.replace(/\s+/g, '-').toLowerCase()}')"
                            aria-expanded="false"
                            aria-controls={`bio-${member.name.replace(/\s+/g, '-').toLowerCase()}`}>
                            Read More
                            <span class="ml-2 opacity-0 group-hover:opacity-100 transition-opacity">↓</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-blue-600/20 via-transparent to-emerald-600/20 opacity-0 blur-xl transition-opacity duration-500 group-hover:opacity-100"></div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="py-16 md:py-20">
      <div class="site-container">
        <div class="feature-card group relative mx-auto max-w-4xl overflow-hidden rounded-xl p-8 transition-all duration-500 hover:scale-[1.02]">
          <div class="absolute inset-0 bg-gradient-to-br from-blue-600/20 via-transparent to-emerald-600/20 opacity-0 transition-opacity duration-500 group-hover:opacity-100"></div>
          <div class="relative">
            <h2 class="h2 mb-4 bg-gradient-to-r from-blue-400 via-teal-300 to-emerald-400 bg-clip-text text-transparent">
              Join Our Team
            </h2>
            <p class="description mx-auto mb-8 max-w-2xl text-lg text-gray-300/90">
              We're always looking for visionary minds who share our passion
              for shaping the future of quantum computing.
            </p>
            <div class="flex flex-wrap justify-center gap-4">
              <Button
                variant="primary"
                href="/careers"
                class="relative overflow-hidden rounded-lg px-6 py-3 text-gray-300 transition-all duration-500 hover:scale-105"
              >
                View Opportunities
              </Button>
              <Button
                variant="ghost"
                href="/contact"
                class="relative overflow-hidden rounded-lg px-6 py-3 text-gray-300 transition-all duration-500 hover:scale-105"
              >
                Contact Us
              </Button>
            </div>
          </div>
          <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-blue-600/20 via-transparent to-emerald-600/20 opacity-0 blur-xl transition-opacity duration-500 group-hover:opacity-100"></div>
        </div>
      </div>
</section>
</main>

<script>
// Toggle bio visibility
function toggleBio(id: string): void {
  const bio = document.getElementById(`bio-${id}`);
  const gradient = document.getElementById(`gradient-${id}`);
  
  if (!bio || !gradient) {
    console.error(`Could not find bio elements for id: ${id}`);
    return;
  }

  const isExpanded = bio.style.maxHeight !== '6rem';
  bio.style.maxHeight = isExpanded ? '6rem' : `${bio.scrollHeight}px`;
  gradient.style.opacity = isExpanded ? '1' : '0';
}

// Initialize event listeners after DOM loads
document.addEventListener('DOMContentLoaded', () => {
  const cards = document.querySelectorAll('.feature-card');
  
  cards.forEach(card => {
    const heading = card.querySelector('h2');
    if (!heading) {
      console.error('Could not find heading element in card');
      return;
    }
    
    const name = heading.textContent?.trim().toLowerCase().replace(/\s+/g, '-') ?? '';
    if (!name) {
      console.error('Could not get name from heading');
      return;
    }
    
    card.setAttribute('onclick', `toggleBio('${name}')`);
    
    const readMoreBtn = card.querySelector('button');
    if (readMoreBtn) {
      readMoreBtn.setAttribute('onclick', `event.stopPropagation(); toggleBio('${name}')`);
    }
  });
});
</script>
</BaseLayout>

<style>
  .text-gradient-blue {
    @apply bg-gradient-to-r from-blue-400 via-teal-300 to-emerald-400 bg-clip-text text-transparent;
    filter: brightness(1.2) saturate(1.2);
    text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
    animation: pulse-gradient 4s ease-in-out infinite;
  }

  @keyframes pulse-gradient {
    0%, 100% {
      filter: brightness(1.2) saturate(1.2);
      text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
    }
    50% {
      filter: brightness(1.4) saturate(1.4);
      text-shadow: 0 0 40px rgba(59, 130, 246, 0.6);
    }
  }

  .feature-card {
    @apply relative rounded-xl border border-blue-500/20 bg-gray-900/80 backdrop-blur-sm;
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .feature-card:hover {
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
    @apply border-blue-500/30 bg-gray-900/90;
  }

  .feature-card::before {
    content: "";
    @apply absolute inset-0 rounded-xl;
    background: radial-gradient(
      800px circle at var(--mouse-x, 0) var(--mouse-y, 0),
      rgba(59, 130, 246, 0.1),
      transparent 40%
    );
    opacity: 0;
    transition: opacity 0.5s;
  }

  .feature-card:hover::before {
    opacity: 1;
  }
</style>

<script type="module">
  const updateMousePosition = (event) => {
    const rect = event.currentTarget.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;
    event.currentTarget.style.setProperty("--mouse-x", `${x}px`);
    event.currentTarget.style.setProperty("--mouse-y", `${y}px`);
  };

  const initCards = () => {
    document.querySelectorAll(".feature-card").forEach((el) => {
      el.addEventListener("mousemove", updateMousePosition);
    });
  };

  // Initialize cards and bios on page load
  document.addEventListener('DOMContentLoaded', () => {
    initCards();
    console.log('Initialized team page interactions');
  });

  // Re-initialize after Astro page transitions
  document.addEventListener("astro:page-load", () => {
    initCards();
    console.log('Re-initialized after Astro page load');
  });
  document.addEventListener("astro:after-swap", () => {
    initCards();
    console.log('Re-initialized after Astro swap');
  });

  // Enhanced toggleBio function with smooth transitions and accessibility
  function toggleBio(id) {
    console.log('toggleBio called for:', id);
    try {
      const bio = document.getElementById(`bio-${id}`);
      const gradient = document.getElementById(`gradient-${id}`);
      const button = document.querySelector(`[aria-controls="bio-${id}"]`);
      
      console.log('Elements found:', {bio, gradient, button});
      
      if (!bio || !gradient || !button) {
        console.error('Could not find bio elements for:', id);
        console.log('Available elements:', {
          bios: document.querySelectorAll('[id^="bio-"]'),
          gradients: document.querySelectorAll('[id^="gradient-"]'),
          buttons: document.querySelectorAll('[aria-controls^="bio-"]')
        });
        return;
      }

      const card = bio.closest('.feature-card');
      if (!card) {
        console.error('Could not find card element for:', id);
        return;
      }

      const isExpanded = bio.getAttribute('aria-expanded') === 'true';
      
      // Add transition properties
      bio.style.transition = 'max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
      gradient.style.transition = 'opacity 0.3s ease';
      
      if (isExpanded) {
        // Collapse
        const currentHeight = bio.scrollHeight;
        bio.style.maxHeight = `${currentHeight}px`;
        // Force reflow
        void bio.offsetHeight;
        bio.style.maxHeight = '6rem';
        gradient.style.opacity = '1';
        button.innerHTML = 'Read More <span class="ml-2 opacity-0 group-hover:opacity-100 transition-opacity">↓</span>';
        button.setAttribute('aria-label', `Expand bio for ${id.replace(/-/g, ' ')}`);
        bio.setAttribute('aria-expanded', 'false');
        card.classList.remove('expanded');
      } else {
        // Expand
        const fullHeight = bio.scrollHeight + 'px';
        bio.style.maxHeight = fullHeight;
        gradient.style.opacity = '0';
        button.innerHTML = 'Read Less <span class="ml-2 opacity-0 group-hover:opacity-100 transition-opacity">↑</span>';
        button.setAttribute('aria-label', `Collapse bio for ${id.replace(/-/g, ' ')}`);
        bio.setAttribute('aria-expanded', 'true');
        card.classList.add('expanded');
        
        // Remove max-height after transition
        bio.addEventListener('transitionend', () => {
          if (bio.style.maxHeight !== '6rem') {
            bio.style.maxHeight = 'none';
          }
        }, { once: true });
      }
    } catch (error) {
      console.error('Error toggling bio:', error);
    }
  }

  // Initialize bios to show full content if short enough
  function initBioHeights() {
    document.querySelectorAll<HTMLElement>('[id^="bio-"]').forEach(bio => {
      if (bio.scrollHeight <= 96) { // 6rem = 96px
        bio.style.maxHeight = 'none';
        bio.setAttribute('aria-expanded', 'true');
        const button = document.querySelector(`[aria-controls="${bio.id}"]`);
        if (button) {
          button.textContent = 'Read Less';
          button.setAttribute('aria-label', `Collapse bio for ${bio.id.replace('bio-', '').replace(/-/g, ' ')}`);
        }
      }
    });
  }

  // Initialize all functionality
  function initializePage() {
    console.log('Initializing page functionality...');
    
    // Initialize card hover effects
    initCards();
    
    // Initialize bio heights and click handlers
    document.querySelectorAll<HTMLElement>('[id^="bio-"]').forEach(bio => {
      console.log(`Initializing bio: ${bio.id}`);
      
      // Show full bio if content is short
      if (bio.scrollHeight <= 96) {
        bio.style.maxHeight = 'none';
        bio.setAttribute('aria-expanded', 'true');
        const button = document.querySelector(`[aria-controls="${bio.id}"]`);
        if (button) {
          button.textContent = 'Read Less';
          button.setAttribute('aria-label', `Collapse bio for ${bio.id.replace('bio-', '').replace(/-/g, ' ')}`);
        }
      }
      
      // Add click handlers to bio buttons
      const buttons = document.querySelectorAll('[aria-controls^="bio-"]');
      buttons.forEach(button => {
        console.log(`Adding click handler for button: ${button.getAttribute('aria-controls')}`);
        button.addEventListener('click', (e) => {
          e.preventDefault();
          console.log(`Button clicked: ${button.getAttribute('aria-controls')}`);
          const id = button.getAttribute('aria-controls')?.replace('bio-', '');
          if (id) {
            console.log(`Toggling bio for: ${id}`);
            toggleBio(id);
          }
        });
      });
    });
    
    // Add click handler to cards
    document.querySelectorAll('.feature-card').forEach(card => {
      card.addEventListener('click', (e) => {
        const bioId = card.querySelector('[id^="bio-"]')?.id.replace('bio-', '');
        if (bioId) {
          console.log(`Card clicked, toggling bio: ${bioId}`);
          toggleBio(bioId);
        }
      });
    });
  }

  // Attach toggleBio to window
  window.toggleBio = toggleBio;

  // Initialize on page load and Astro navigation
  document.addEventListener('DOMContentLoaded', () => {
    console.log('DOMContentLoaded event fired');
    initializePage();
  });
  document.addEventListener('astro:page-load', () => {
    console.log('astro:page-load event fired');
    initializePage();
  });
  document.addEventListener('astro:after-swap', () => {
    console.log('astro:after-swap event fired');
    initializePage();
  });

  // Initialize immediately if DOM is already loaded
  if (document.readyState === 'complete') {
    console.log('Document already loaded, initializing immediately');
    initializePage();
  }

  // Debug logging for initialization
  console.log('Team page script loaded');
  console.log('Window.toggleBio exists:', typeof window.toggleBio === 'function');
  console.log('Initial cards:', document.querySelectorAll('.feature-card').length);
  console.log('Initial bios:', document.querySelectorAll('[id^="bio-"]').length);
  console.log('Initial buttons:', document.querySelectorAll('[aria-controls^="bio-"]').length);
